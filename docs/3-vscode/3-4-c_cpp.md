# C/C++ <a href="https://github.com/spencerwooo"><Badge text="@SpencerWoo" vertical="middle"/></a>

::: callout ğŸ¥ æœ¬æ–‡å†…å®¹
æœ¬æ–‡æˆ‘ä»¬ä¼šå¯¹åˆ©ç”¨ VS Code åœ¨ WSL ç¯å¢ƒä¸­ç¼–å†™ Cã€C++ ç¨‹åºçš„æ–¹æ³•è¿›è¡Œä»‹ç»ã€‚æœ¬æ–‡ä¸»è¦é¢å‘å­¦ä¹  Cã€C++ è¯­è¨€çš„åŒå­¦ï¼ŒåŒ…æ‹¬ä½¿ç”¨ Cã€C++ å®ç°å„é¡¹ç®—æ³•çš„ ACM ç«èµ›åŒå­¦ï¼Œä»¥åŠå­¦ä¹ æ•°æ®ç»“æ„ç­‰çŸ¥è¯†çš„åŒå­¦ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæœ¬æ–‡çš„é…ç½®é¡¹ç›®å¯èƒ½ä»…ä»…é€‚åˆå•ä¸ª Cã€C++ ä»£ç æ–‡ä»¶çš„ç¼–è¯‘è¿è¡Œï¼Œæ¶‰åŠåˆ°å¤§å‹ Cã€C++ é¡¹ç›®æˆ‘æ›´åŠ æ¨èä½¿ç”¨ä¸“ä¸š IDEï¼ˆæ¯”å¦‚ Visual Studioï¼‰è¿›è¡Œå¼€å‘å·¥ä½œã€‚
:::

åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¯¹ç¼–è¯‘è¿è¡Œ Cã€C++ æ–‡ä»¶çš„åŸºç¡€çŸ¥è¯†è¿›è¡Œç®€å•çš„ä»‹ç»ã€‚æˆ‘ä»¬å¯ä»¥ï¼š

- ä½¿ç”¨ `gcc` å·¥å…·æ¥ç¼–è¯‘è¿è¡Œ C è¯­è¨€ç¼–å†™çš„ä»£ç æ–‡ä»¶
- ä½¿ç”¨ `g++` å·¥å…·æ¥ç¼–è¯‘è¿è¡Œ C++ è¯­è¨€ç¼–å†™çš„ä»£ç æ–‡ä»¶
- ä½¿ç”¨ `gdb` å·¥å…·æ¥è°ƒè¯• C æˆ– C++ è¯­è¨€ç¼–å†™çš„ä»£ç æ–‡ä»¶

åœ¨å‘½ä»¤è¡Œç¯å¢ƒä¸­ï¼ŒåŸºæœ¬çš„ç¼–è¯‘è¿è¡Œå‘½ä»¤å¤§è‡´å¦‚ä¸‹ï¼š

```bash
# ä½¿ç”¨ gcc ç¼–è¯‘ä¸€ä¸ªåå« hello.c çš„ C æ–‡ä»¶ï¼Œç”Ÿæˆåä¸º hello çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæˆ–â€¦â€¦
gcc hello.c -o hello
# ä½¿ç”¨ g++ ç¼–è¯‘ä¸€ä¸ªåå« hello.cpp çš„ C++ æ–‡ä»¶ï¼Œç”Ÿæˆåä¸º hello çš„å¯æ‰§è¡Œæ–‡ä»¶
g++ hello.cpp -o hello

# æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ hello
./hello
```

![](https://cdn.spencer.felinae98.cn/github/2020/09/200902_222006.png)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹å¦‚ä½•åˆ©ç”¨ VS Code ç¼–è¯‘ã€è°ƒè¯• C/C++ é¡¹ç›®

## å®‰è£… C/C++ æ’ä»¶

![](https://cdn.spencer.felinae98.cn/github/2020/09/200902_222006-1.png)

ä¸‹è½½å®‰è£… VS Code å®˜æ–¹ C/C++ æ’ä»¶ï¼š[C/C++ for Visual Studio Code](https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools).

## å®‰è£… C/C++ ç¼–è¯‘è°ƒè¯•å·¥å…·

- ä¸‹è½½å®‰è£…åŒ…å«å¤§éƒ¨åˆ†å¼€å‘æ‰€éœ€ç»„ä»¶çš„ `build-essential` ç»„ä»¶åŒ…ï¼š

```bash
sudo apt install build-essential
```

- ä¸ºäº†ç¡®ä¿å®‰è£…äº†ç¼–è¯‘ C/C++ çš„ç»„ä»¶ï¼Œæˆ‘ä»¬å°è¯•å®‰è£…ç¼–è¯‘å·¥å…· `gcc`ã€`g++` å’Œè°ƒè¯•å·¥å…· `gdb`ï¼š

```bash
sudo apt install gcc g++ gdb
```

- å†æ¬¡ç¡®è®¤å®‰è£…çŠ¶æ€ï¼š

  - è¿è¡Œï¼š`gcc --version` ä¸ `g++ --version`ï¼Œå¦‚æœæœ‰ç±»ä¼¼ä¸‹é¢çš„è¾“å‡ºï¼Œè¯´æ˜æˆ‘ä»¬çš„ C/C++ ç¼–è¯‘ç¯å¢ƒå°±å®‰è£…æˆåŠŸäº†ï¼š

  ![](https://cdn.spencer.felinae98.cn/github/2020/09/200902_222006-2.png)

  - è¿è¡Œï¼š`gdb --version`ï¼Œå¦‚æœæœ‰ç±»ä¼¼ä¸‹é¢çš„è¾“å‡ºï¼Œè¯´æ˜æˆ‘ä»¬è°ƒè¯• C/C++ ç¨‹åºçš„ç¯å¢ƒå°±å®‰è£…æˆåŠŸäº†ï¼š

  ![](https://cdn.spencer.felinae98.cn/github/2020/09/200902_222006-3.png)

## VS Code æ™ºèƒ½ä»£ç æç¤º

é»˜è®¤æƒ…å†µä¸‹ï¼ŒVS Code ä¼šæ ¹æ®ä½ å½“å‰æ‰€åœ¨çš„ç¯å¢ƒè‡ªåŠ¨ä¸ºä½ ç”Ÿæˆä»£ç æ™ºèƒ½æç¤ºï¼ˆä¹Ÿå°±æ˜¯ Intellisenseï¼‰çš„é…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¾€å¾€å«åš `c_cpp_properties.json`ï¼Œä½äºå½“å‰é¡¹ç›®çš„ `.vscode` æ–‡ä»¶å¤¹ä¸‹ã€‚åœ¨æ‰“å¼€ Cã€C++ æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼ŒVS Code å³ä¸‹è§’ä¼šå‡ºç°å½“å‰ä½¿ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚è¿™é‡Œå°±æ˜¯ Linuxï¼Œè¡¨ç¤ºæˆ‘ä»¬åœ¨ Linux ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨é»˜è®¤çš„ Linux é…ç½®æ–‡ä»¶ã€‚

![](https://cdn.spencer.felinae98.cn/github/2020/09/200902_222006-4.png)

ç‚¹å‡» VS Code å³ä¸‹è§’é…ç½®æ–‡ä»¶çš„æŒ‰é’®ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å¼€é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚VS Code æä¾›äº†ç›´æ¥ä¿®æ”¹ JSON æ–‡ä»¶ä»¥åŠé€šè¿‡ UI çš„æ–¹æ³•ä¿®æ”¹é…ç½®çš„ä¸¤ç§æ‰‹æ®µï¼ŒUI çš„æ–¹æ³•æœ‰æ›´å¤šçš„è¯´æ˜äº‹é¡¹ï¼Œå¤§å®¶å¯ä»¥æŒ‰ç…§è‡ªå·±çš„å®é™…æƒ…å†µè¿›è¡Œé…ç½®ã€‚

![](https://cdn.spencer.felinae98.cn/github/2020/09/200902_222006-5.png)

äº‹å®ä¸Šï¼Œè¿™é‡Œéœ€è¦é…ç½®çš„é¡¹ç›®å¹¶ä¸å¤šï¼Œå¦‚æœä½ æ²¡æœ‰æ¶‰åŠåˆ°ä¸€äº›ä¸“æœ‰çš„ç¼–è¯‘é€‰é¡¹çš„è¯ï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨é»˜è®¤é…ç½®å³å¯ã€‚

## æ–‡ä»¶ç»“æ„

ä¸€ä¸ªæˆ‘ä¸ªäººæ¯”è¾ƒæ¨èçš„ C/C++ çš„æ–‡ä»¶ç»“æ„æ˜¯è¿™æ ·çš„ï¼š

::: tree
.
â”œâ”€â”€ `.vscode`
â”‚ â”œâ”€â”€ c_cpp_properties.json
â”‚ â”œâ”€â”€ launch.json
â”‚ â””â”€â”€ tasks.json
â”œâ”€â”€ Hello.cpp (or Hello.c)
â”œâ”€â”€ `Hello`
â”œâ”€â”€ in.txt
â””â”€â”€ out.txt
:::

å…¶ä¸­ï¼š

> ğŸ”´ å¿…è¦ã€ğŸ”µ å¯é€‰ã€ğŸ”· è‡ªåŠ¨ç”Ÿæˆã€‚

| å±æ€§ | æ–‡ä»¶ç”¨é€”                                                                                                                                                                                                   |
| ---- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ğŸ”´   | `Hello.cpp` æ˜¯ä¸» C++ æ–‡ä»¶ï¼ˆç›¸åº”çš„ï¼Œ`Hello.c` æ˜¯ä¸» C æ–‡ä»¶ï¼‰                                                                                                                                                 |
| ğŸ”·   | `.vscode/` æ–‡ä»¶å¤¹ä¸‹é¢å®‰ç½® VS Code ç¼–è¯‘è°ƒè¯•æ‰€éœ€çš„é…ç½®æ–‡ä»¶                                                                                                                                                   |
| ğŸ”µ   | `in.txt` å’Œ `out.txt` æ˜¯ C/C++ ç¨‹åºçš„è¾“å…¥è¾“å‡ºæ–‡ä»¶ï¼Œæˆ‘ç›¸ä¿¡ç»å†è¿‡ ACM åŸ¹è®­çš„åŒå­¦ä¼šç†è§£ä¸ºä»€ä¹ˆè¦å•ç‹¬é…ç½®è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸»è¦åŸå› åœ¨äºæœ‰æ—¶å€™è¾“å…¥å†…å®¹å¤ªåºå¤§å¤åˆ¶ç²˜è´´æœ‰æ—¶å€™ä¼šå‡ºç°æ ¼å¼é—®é¢˜ï¼Œé…ç½®è¾“å…¥è¾“å‡ºæ–‡ä»¶æ›´åŠ æœ‰åˆ©å¼€å‘ |
| ğŸ”·   | `a.out` æ˜¯ç¼–è¯‘ä¹‹å C/C++ ç¨‹åºçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆ                                                                                                                                                |

å½“ç„¶ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹å¯ä»¥æ”¾ç½®å¤šä¸ª C/C++ æ–‡ä»¶ï¼Œä¸ä¼šå½±å“æ­£å¸¸è°ƒè¯•ä¸å¼€å‘ã€‚

## ä¸€é”®ç¼–è¯‘è¿è¡Œ

::: callout ğŸ” æ³¨æ„
C/C++ æ–‡ä»¶çš„ä¸€é”®ç¼–è¯‘è¿è¡Œä¾èµ–äº Code Runner æ’ä»¶ï¼ŒåŸºç¡€é…ç½®è¯¦è§ï¼š[Dev on Windows with WSL - Code Runner](/dev/3-VSCode/3-2-Code-Runner.md)
:::

å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ©ç”¨ä¹‹å‰å®‰è£…çš„ Code Runner æ’ä»¶è¿›è¡Œç¼–è¯‘è¿è¡Œ C/C++ ç¨‹åºã€‚é»˜è®¤æƒ…å†µä¸‹ Code Runner ç¼–è¯‘ Cã€C++ æ–‡ä»¶çš„é…ç½®å¦‚ä¸‹ï¼š

```json
"code-runner.executorMap": {
  "c": "cd $dir && gcc $fileName -o $fileNameWithoutExt && $dir$fileNameWithoutExt",
  "cpp": "cd $dir && g++ $fileName -o $fileNameWithoutExt && $dir$fileNameWithoutExt",
}
```

å¯ä»¥çœ‹åˆ°ï¼š

- å…·ä½“ç¼–è¯‘çš„éƒ¨åˆ†å‘½ä»¤æ˜¯ `gcc $fileName -o $fileNameWithoutExt`
- ç¼–è¯‘å‡ºæ¥çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸º `$dir$fileNameWithoutExt`
- è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶çš„å‘½ä»¤ä¸º `./$dir$fileNameWithoutExt`

é€šè¿‡ Code Runner æ’ä»¶æˆ‘ä»¬å®é™…ä¸Šå°±æ˜¯è‡ªåŠ¨åŒ–äº†è¿™ä¸€è¿‡ç¨‹ï¼Œä¸€é”®ç¼–è¯‘ã€‚ç»è¿‡è¿™æ ·çš„é…ç½®ï¼Œåœ¨ä»£ç å·¥ä½œåŒºå³é”®é€‰æ‹© `Run Code`ã€åœ¨ Command Palette (`Ctrl + Shift + P`) è¾“å…¥ Run Codeã€æˆ–è€…ç›´æ¥å¿«æ·é”® `Ctrl + Alt + N`ï¼Œå°±å¯ä»¥ç¼–è¯‘æ‰§è¡Œä»£ç äº†ã€‚**è¾“å…¥ç­‰å…¶ä»–ä¸ç¨‹åºè¿›è¡Œäº¤äº’çš„éƒ¨åˆ†ä½äºç»ˆç«¯åŒºåŸŸã€‚**

å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¿™é‡Œéƒ½ä¸éœ€è¦æ›´æ”¹ï¼Œä¸è¿‡å¦‚æœä½ å¸Œæœ›è‡ªå®šä¹‰ç¼–è¯‘å‚æ•°ï¼Œå¯ä»¥åœ¨ Code Runner çš„é…ç½®é¡¹ç›® `code-runner.executorMap` ä¸­è¿›è¡Œç›¸åº”çš„å¢å‡ã€‚

## è°ƒè¯• C++ é¡¹ç›®

::: callout ğŸ§‡ æ³¨æ„
æ¥ä¸‹æ¥æˆ‘ä»¥ C++ çš„è°ƒè¯•ä¸ºä¾‹å­è¿›è¡Œä»‹ç»ï¼ŒC è¯­è¨€ç¨‹åºçš„è°ƒè¯•å‡ ä¹ä¸€è‡´ï¼Œå¤§å®¶è¯·ä¸¾ä¸€åä¸‰ã€‚
:::

VS Code æœ‰ç€å…¶ä»–ç¼–è¾‘å™¨æ— æ³•æ¯”æ‹Ÿçš„è°ƒè¯•åŠŸèƒ½ã€‚å¼ºå¤§åˆ°ä»¤äººå‘æŒ‡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨å·²ç»æ‰“å¼€ä¸€ä¸ª C++ æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œç‚¹å‡» VS Code èœå•æ çš„ Debug > Start debuggingï¼Œæˆ–è€…å¿«æ·é”® `F5`ï¼Œå³å¯å”¤èµ· VS Code çš„è°ƒè¯•åŠŸèƒ½ã€‚åœ¨æ²¡æœ‰ä»»ä½•é…ç½®çš„æƒ…å†µä¸‹ï¼Œé¦–å…ˆ VS Code ä¼šæç¤ºæˆ‘ä»¬é€‰æ‹©ç¼–è¯‘å™¨ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹© `C++ (GDB/LLDB)` çš„ç¯å¢ƒï¼š

![](https://cdn.spencer.felinae98.cn/github/2020/09/200902_222006-6.png)

ä¹‹åï¼Œé€‰æ‹©ä¸€ä¸ªå·²ç»é…ç½®å¥½çš„é…ç½®ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹© `g++ build and debug active file`ï¼Œä¹Ÿå°±æ˜¯åˆ©ç”¨ `g++` å·¥å…·ç¼–è¯‘å½“å‰æ–‡ä»¶å¹¶å¯¹å…¶è¿›è¡Œè°ƒè¯•ï¼š

![](https://cdn.spencer.felinae98.cn/github/2020/09/200902_222006-7.png)

å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥ç›´æ¥è¿›å…¥è°ƒè¯•ç•Œé¢ã€‚å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢çš„é€‰é¡¹æ¡å°±æ˜¯å•æ­¥æ‰§è¡Œã€è·³è‡³ä¸‹ä¸€éƒ¨åˆ†ç­‰è°ƒè¯•å‘½ä»¤ã€‚åœ¨ä»£ç å·¦ä¾§è¡Œå·æ—è¾¹ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºç¨‹åºæ·»åŠ æ–­ç‚¹ç­‰ç­‰ã€‚ä¾§è¾¹æ ä¸Šé¢ä¼šå®æ—¶æ˜¾ç¤ºç¨‹åºä¸­æ¶‰åŠåˆ°çš„æŸä¸ªå˜é‡çš„å€¼ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘çš„ `input` å˜é‡åœ¨æ¥æ”¶åˆ°è¾“å…¥ä¹‹åå°±å˜æˆäº†æˆ‘åˆšåˆšè¾“å…¥çš„ `Hello!`ã€‚

![](https://cdn.spencer.felinae98.cn/github/2020/09/200902_222006-8.png)

ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œåœ¨å½“å‰é¡¹ç›®çš„ `.vscode` æ–‡ä»¶å¤¹ä¸‹å‡ºç°äº†ä¸¤ä¸ªæ–‡ä»¶ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ `tasks.json` å’Œ `launch.json`ï¼š

- `tasks.json`ï¼šæ˜¯ç¼–è¯‘å½“å‰æ–‡ä»¶çš„æŒ‡ä»¤
- `launch.json`ï¼šæ˜¯æ‰§è¡Œå½“å‰æ–‡ä»¶å¹¶è®© `gdb` è°ƒè¯•å·¥å…·è¿æ¥åˆ°å¯æ‰§è¡Œæ–‡ä»¶çš„æŒ‡ä»¤

![](https://cdn.spencer.felinae98.cn/github/2020/09/200902_222006-9.png)

å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨ä¸Šé¢çš„æ­¥éª¤å³å¯å¯¹ä¸€ä¸ª C++ ä»£ç é¡¹ç›®è¿›è¡Œè°ƒè¯•ã€‚

## ACM æ¯”èµ›çš„å»ºè®®

ä¸ºäº†æ›´æ–¹ä¾¿çš„å¤„ç†åºå¤§çš„æ ¼å¼åŒ–è¾“å…¥ï¼Œåœ¨ C/C++ ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™æ ·çš„ä»£ç ç‰‡æ®µæ¥è¯»å–è¾“å…¥ `in.txt` å¹¶å°†ç¨‹åºè¾“å‡ºã€ç¨‹åºè¿è¡Œæ—¶é—´å†™å…¥æ–‡ä»¶ `out.txt`ã€‚è¿™æ®µä»£ç æ˜¯è¿™æ ·çš„ï¼š

```c
#ifdef SUBMIT
freopen("in.txt", "r", stdin);
freopen("out.txt", "w", stdout);
long _begin_time = clock();
#endif

/* your code here */

#ifdef SUBMIT
long _end_time = clock();
printf("time = %ld ms", _end_time - _begin_time);
#endif
```

åŒæ—¶è¦ä¿®æ”¹ `tasks.json` ä¸­ `args` å­—æ®µï¼Œå¢åŠ å‚æ•° `-DSUBMIT` è®©ç¼–è¯‘å™¨å®šä¹‰ `SUBMIT` å®ï¼Œæœªå®šä¹‰è¯¥å®çš„ç¯å¢ƒä¸­ä¸Šé¢çš„ä»£ç æ®µåˆ™ä¸ä¼šè¢«ç¼–è¯‘ï¼š

```json
"args": [
  "-DSUBMIT",
  "-g",
  "${file}",
  "-o",
  "${fileDirname}/${fileBasenameNoExtension}"
],
```

VS Code æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰ä»£ç ç‰‡æ®µï¼Œè®¿é—®è¿™é‡Œç›´æ¥è·å–ä¸º VS Code ç”Ÿæˆçš„ä»£ç ç‰‡æ®µè®¾ç½® > [Snippet Generator](https://url.cn/5wqOpNm)ï¼š

![](https://cdn.spencer.felinae98.cn/github/2020/09/200902_222006-10.png)

ç„¶ååœ¨å·¦ä¸‹è§’è®¾ç½® > User Snippets ä¸­æ·»åŠ è¿™ä¸ªä»£ç ç‰‡æ®µï¼Œä¹‹ååªéœ€è¾“å…¥ `inputoutput` å°±å¯ä»¥è‡ªåŠ¨è¡¥å…¨äº†ã€‚

æ›´å¤šæœ‰å…³åˆ©ç”¨ VS Code æ’°å†™ã€ç¼–è¯‘ã€è°ƒè¯• C/C++ ä»£ç é¡¹ç›®çš„æ–¹æ³•ï¼Œè¯·å‚è€ƒï¼š[C/C++ for Visual Studio Code (Preview) - Visual Studio Code Docs](https://code.visualstudio.com/docs/languages/cpp)
